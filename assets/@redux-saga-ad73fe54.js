import{g as J,i as Nn}from"./@babel-54babf39.js";import{c as xn}from"./redux-7fe216dc.js";var k=function(n){return"@@redux-saga/"+n},Ln=k("CANCEL_PROMISE"),nn=k("CHANNEL_END"),Rn=k("IO"),Q=k("MATCH"),On=k("MULTICAST"),en=k("SAGA_ACTION"),In=k("SELF_CANCELLATION"),Mn=k("TASK"),I=k("TASK_CANCEL"),tn=k("TERMINATE"),wn=k("LOCATION"),jn=function(n){return n==null},Fn=function(n){return n!=null},x=function(n){return typeof n=="function"},Pn=function(n){return typeof n=="string"},M=Array.isArray,D=function(n){return n&&x(n.then)},W=function(n){return n&&x(n.next)&&x(n.throw)},Dn=function(n){return x(n)&&n.hasOwnProperty("toString")},Kn=function(n){return Boolean(n)&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype},Un=function(n){return function(){return n}},Hn=Un(!0),y=function(){},_n=function(n){return n},G=function(n,t){J(n,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(c){n[c]=t[c]})},Wn=function(n,t){var c;return(c=[]).concat.apply(c,t.map(n))};function K(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}function Gn(e){var n=!1;return function(){n||(n=!0,e())}}var qn=function(n){throw n},Bn=function(n){return{value:n,done:!0}};function Y(e,n,t){n===void 0&&(n=qn),t===void 0&&(t="iterator");var c={meta:{name:t},next:e,throw:n,return:Bn,isSagaIterator:!0};return typeof Symbol<"u"&&(c[Symbol.iterator]=function(){return c}),c}function Xn(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var rn=function(n){return Array.apply(null,new Array(n))},bn=function(n){return function(t){return n(Object.defineProperty(t,en,{value:!0}))}},an=function(n){return n===tn},cn=function(n){return n===I},on=function(n){return an(n)||cn(n)};function un(e,n){var t=Object.keys(e),c=t.length,o=0,u,i=M(e)?rn(c):{},a={};function r(){o===c&&(u=!0,n(i))}return t.forEach(function(l){var f=function(h,p){u||(p||on(h)?(n.cancel(),n(h,p)):(i[l]=h,o++,r()))};f.cancel=y,a[l]=f}),n.cancel=function(){u||(u=!0,t.forEach(function(l){return a[l].cancel()}))},a}function q(e){return{name:e.name||"anonymous",location:fn(e)}}function fn(e){return e[wn]}var zn="Channel's Buffer overflow!",Vn=1,Qn=3,ln=4;function Yn(e,n){e===void 0&&(e=10);var t=new Array(e),c=0,o=0,u=0,i=function(f){t[o]=f,o=(o+1)%e,c++},a=function(){if(c!=0){var f=t[u];return t[u]=null,c--,u=(u+1)%e,f}},r=function(){for(var f=[];c;)f.push(a());return f};return{isEmpty:function(){return c==0},put:function(f){if(c<e)i(f);else{var s;switch(n){case Vn:throw new Error(zn);case Qn:t[o]=f,o=(o+1)%e,u=o;break;case ln:s=2*e,t=r(),c=t.length,o=t.length,u=0,t.length=s,e=s,i(f);break}}},take:a,flush:r}}var Zn=function(n){return Yn(n,ln)},$n="TAKE",Jn="PUT",ne="ALL",ee="RACE",te="CALL",re="CPS",ae="FORK",ce="JOIN",oe="CANCEL",ue="SELECT",ie="ACTION_CHANNEL",fe="CANCELLED",le="FLUSH",se="GET_CONTEXT",ve="SET_CONTEXT";function de(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e}var sn=[],U=0;function he(e){try{B(),e()}finally{hn()}}function vn(e){sn.push(e),U||(B(),gn())}function dn(e){try{return B(),e()}finally{gn()}}function B(){U++}function hn(){U--}function gn(){hn();for(var e;!U&&(e=sn.shift())!==void 0;)he(e)}var ge=function(n){return function(t){return n.some(function(c){return X(c)(t)})}},Ee=function(n){return function(t){return n(t)}},Z=function(n){return function(t){return t.type===String(n)}},pe=function(n){return function(t){return t.type===n}},En=function(){return Hn};function X(e){var n=e==="*"?En:Pn(e)?Z:M(e)?ge:Dn(e)?Z:x(e)?Ee:Kn(e)?pe:null;if(n===null)throw new Error("invalid pattern: "+e);return n(e)}var w={type:nn},b=function(n){return n&&n.type===nn};function Ce(e){e===void 0&&(e=Zn());var n=!1,t=[];function c(a){if(!n){if(t.length===0)return e.put(a);var r=t.shift();r(a)}}function o(a){n&&e.isEmpty()?a(w):e.isEmpty()?(t.push(a),a.cancel=function(){K(t,a)}):a(e.take())}function u(a){if(n&&e.isEmpty()){a(w);return}a(e.flush())}function i(){if(!n){n=!0;var a=t;t=[];for(var r=0,l=a.length;r<l;r++){var f=a[r];f(w)}}}return{take:o,put:c,flush:u,close:i}}function ye(){var e,n=!1,t=[],c=t,o=function(){c===t&&(c=t.slice())},u=function(){n=!0;var a=t=c;c=[],a.forEach(function(r){r(w)})};return e={},e[On]=!0,e.put=function(a){if(!n){if(b(a)){u();return}for(var r=t=c,l=0,f=r.length;l<f;l++){var s=r[l];s[Q](a)&&(s.cancel(),s(a))}}},e.take=function(a,r){if(r===void 0&&(r=En),n){a(w);return}a[Q]=r,o(),c.push(a),a.cancel=Gn(function(){o(),K(c,a)})},e.close=u,e}function pn(){var e=ye(),n=e.put;return e.put=function(t){if(t[en]){n(t);return}vn(function(){n(t)})},e}var O=0,N=1,P=2,Cn=3;function z(e,n){var t=e[Ln];x(t)&&(n.cancel=t),e.then(n,function(c){n(c,!0)})}var F=0,yn=function(){return++F},C;function Se(e,n){return e.isSagaIterator?{name:e.meta.name}:q(n)}function Ae(e){var n=e.context,t=e.fn,c=e.args;try{var o=t.apply(n,c);if(W(o))return o;var u=!1,i=function(r){return u?{value:r,done:!0}:(u=!0,{value:o,done:!D(o)})};return Y(i)}catch(a){return Y(function(){throw a})}}function me(e,n,t){var c=n.channel,o=n.action,u=n.resolve;vn(function(){var i;try{i=(c?c.put:e.dispatch)(o)}catch(a){t(a,!0);return}u&&D(i)?z(i,t):t(i)})}function Te(e,n,t){var c=n.channel,o=c===void 0?e.channel:c,u=n.pattern,i=n.maybe,a=function(l){if(l instanceof Error){t(l,!0);return}if(b(l)&&!i){t(tn);return}t(l)};try{o.take(a,Fn(u)?X(u):null)}catch(r){t(r,!0);return}t.cancel=a.cancel}function ke(e,n,t,c){var o=n.context,u=n.fn,i=n.args,a=c.task;try{var r=u.apply(o,i);if(D(r)){z(r,t);return}if(W(r)){H(e,r,a.context,F,q(u),!1,t);return}t(r)}catch(l){t(l,!0)}}function Ne(e,n,t){var c=n.context,o=n.fn,u=n.args;try{var i=function(r,l){jn(r)?t(l):t(r,!0)};o.apply(c,u.concat(i)),i.cancel&&(t.cancel=i.cancel)}catch(a){t(a,!0)}}function xe(e,n,t,c){var o=n.context,u=n.fn,i=n.args,a=n.detached,r=c.task,l=Ae({context:o,fn:u,args:i}),f=Se(l,u);dn(function(){var s=H(e,l,r.context,F,f,a,void 0);a?t(s):s.isRunning()?(r.queue.addTask(s),t(s)):s.isAborted()?r.queue.abort(s.error()):t(s)})}function Le(e,n,t,c){var o=c.task,u=function(r,l){if(r.isRunning()){var f={task:o,cb:l};l.cancel=function(){r.isRunning()&&K(r.joiners,f)},r.joiners.push(f)}else r.isAborted()?l(r.error(),!0):l(r.result())};if(M(n)){if(n.length===0){t([]);return}var i=un(n,t);n.forEach(function(a,r){u(a,i[r])})}else u(n,t)}function _(e){e.isRunning()&&e.cancel()}function Re(e,n,t,c){var o=c.task;n===In?_(o):M(n)?n.forEach(_):_(n),t()}function Oe(e,n,t,c){var o=c.digestEffect,u=F,i=Object.keys(n);if(i.length===0){t(M(n)?[]:{});return}var a=un(n,t);i.forEach(function(r){o(n[r],u,a[r],r)})}function Ie(e,n,t,c){var o=c.digestEffect,u=F,i=Object.keys(n),a=M(n)?rn(i.length):{},r={},l=!1;i.forEach(function(f){var s=function(p,E){l||(E||on(p)?(t.cancel(),t(p,E)):(t.cancel(),l=!0,a[f]=p,t(a)))};s.cancel=y,r[f]=s}),t.cancel=function(){l||(l=!0,i.forEach(function(f){return r[f].cancel()}))},i.forEach(function(f){l||o(n[f],u,r[f],f)})}function Me(e,n,t){var c=n.selector,o=n.args;try{var u=c.apply(void 0,[e.getState()].concat(o));t(u)}catch(i){t(i,!0)}}function we(e,n,t){var c=n.pattern,o=n.buffer,u=Ce(o),i=X(c),a=function l(f){b(f)||e.channel.take(l,i),u.put(f)},r=u.close;u.close=function(){a.cancel(),r()},e.channel.take(a,i),t(u)}function je(e,n,t,c){var o=c.task;t(o.isCancelled())}function Fe(e,n,t){n.flush(t)}function Pe(e,n,t,c){var o=c.task;t(o.context[n])}function De(e,n,t,c){var o=c.task;G(o.context,n),t()}var Ke=(C={},C[$n]=Te,C[Jn]=me,C[ne]=Oe,C[ee]=Ie,C[te]=ke,C[re]=Ne,C[ae]=xe,C[ce]=Le,C[oe]=Re,C[ue]=Me,C[ie]=we,C[fe]=je,C[le]=Fe,C[se]=Pe,C[ve]=De,C);function Ue(e,n,t){var c=[],o,u=!1;r(e);var i=function(){return c};function a(f){n(),l(),t(f,!0)}function r(f){c.push(f),f.cont=function(s,h){u||(K(c,f),f.cont=y,h?a(s):(f===e&&(o=s),c.length||(u=!0,t(o))))}}function l(){u||(u=!0,c.forEach(function(f){f.cont=y,f.cancel()}),c=[])}return{addTask:r,cancelAll:l,abort:a,getTasks:i}}function Sn(e,n){return e+"?"+n}function He(e){var n=fn(e);if(n){var t=n.code,c=n.fileName,o=n.lineNumber,u=t+"  "+Sn(c,o);return u}return""}function $(e){var n=e.name,t=e.location;return t?n+"  "+Sn(t.fileName,t.lineNumber):n}function _e(e){var n=Wn(function(t){return t.cancelledTasks},e);return n.length?["Tasks cancelled due to error:"].concat(n).join(`
`):""}var V=null,j=[],We=function(n){n.crashedEffect=V,j.push(n)},An=function(){V=null,j.length=0},Ge=function(n){V=n},qe=function(){var n=j[0],t=j.slice(1),c=n.crashedEffect?He(n.crashedEffect):null,o="The above error occurred in task "+$(n.meta)+(c?` 
 when executing effect `+c:"");return[o].concat(t.map(function(u){return"    created by "+$(u.meta)}),[_e(j)]).join(`
`)};function Be(e,n,t,c,o,u,i){var a;i===void 0&&(i=y);var r=O,l,f,s=null,h=[],p=Object.create(t),E=Ue(n,function(){h.push.apply(h,E.getTasks().map(function(T){return T.meta.name}))},S);function d(){r===O&&(r=N,E.cancelAll(),S(I,!1))}function S(v,T){if(!T)v===I?r=N:r!==N&&(r=Cn),l=v,s&&s.resolve(v);else{if(r=P,We({meta:o,cancelledTasks:h}),A.isRoot){var L=qe();An(),e.onError(v,{sagaStack:L})}f=v,s&&s.reject(v)}A.cont(v,T),A.joiners.forEach(function(R){R.cb(v,T)}),A.joiners=null}function g(v){G(p,v)}function m(){return s||(s=de(),r===P?s.reject(f):r!==O&&s.resolve(l)),s.promise}var A=(a={},a[Mn]=!0,a.id=c,a.meta=o,a.isRoot=u,a.context=p,a.joiners=[],a.queue=E,a.cancel=d,a.cont=i,a.end=S,a.setContext=g,a.toPromise=m,a.isRunning=function(){return r===O},a.isCancelled=function(){return r===N||r===O&&n.status===N},a.isAborted=function(){return r===P},a.result=function(){return l},a.error=function(){return f},a);return A}function H(e,n,t,c,o,u,i){var a=e.finalizeRunEffect(p);h.cancel=y;var r={meta:o,cancel:s,status:O},l=Be(e,r,t,c,o,u,i),f={task:l,digestEffect:E};function s(){r.status===O&&(r.status=N,h(I))}return i&&(i.cancel=l.cancel),h(),l;function h(d,S){try{var g;S?(g=n.throw(d),An()):cn(d)?(r.status=N,h.cancel(),g=x(n.return)?n.return(I):{done:!0,value:I}):an(d)?g=x(n.return)?n.return():{done:!0}:g=n.next(d),g.done?(r.status!==N&&(r.status=Cn),r.cont(g.value)):E(g.value,c,h)}catch(m){if(r.status===N)throw m;r.status=P,r.cont(m,!0)}}function p(d,S,g){if(D(d))z(d,g);else if(W(d))H(e,d,l.context,S,o,!1,g);else if(d&&d[Rn]){var m=Ke[d.type];m(e,d.payload,g,f)}else g(d)}function E(d,S,g,m){m===void 0&&(m="");var A=yn();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:A,parentEffectId:S,label:m,effect:d});var v;function T(L,R){v||(v=!0,g.cancel=y,e.sagaMonitor&&(R?e.sagaMonitor.effectRejected(A,L):e.sagaMonitor.effectResolved(A,L)),R&&Ge(d),g(L,R))}T.cancel=y,g.cancel=function(){v||(v=!0,T.cancel(),T.cancel=y,e.sagaMonitor&&e.sagaMonitor.effectCancelled(A))},a(d,A,T)}}function Xe(e,n){for(var t=e.channel,c=t===void 0?pn():t,o=e.dispatch,u=e.getState,i=e.context,a=i===void 0?{}:i,r=e.sagaMonitor,l=e.effectMiddlewares,f=e.onError,s=f===void 0?Xn:f,h=arguments.length,p=new Array(h>2?h-2:0),E=2;E<h;E++)p[E-2]=arguments[E];var d=n.apply(void 0,p),S=yn();r&&(r.rootSagaStarted=r.rootSagaStarted||y,r.effectTriggered=r.effectTriggered||y,r.effectResolved=r.effectResolved||y,r.effectRejected=r.effectRejected||y,r.effectCancelled=r.effectCancelled||y,r.actionDispatched=r.actionDispatched||y,r.rootSagaStarted({effectId:S,saga:n,args:p}));var g;if(l){var m=xn.apply(void 0,l);g=function(T){return function(L,R,mn){var Tn=function(kn){return T(kn,R,mn)};return m(Tn)(L)}}}else g=_n;var A={channel:c,dispatch:bn(o),getState:u,sagaMonitor:r,onError:s,finalizeRunEffect:g};return dn(function(){var v=H(A,d,a,S,q(n),!0,void 0);return r&&r.effectResolved(S,v),v})}function Qe(e){var n=e===void 0?{}:e,t=n.context,c=t===void 0?{}:t,o=n.channel,u=o===void 0?pn():o,i=n.sagaMonitor,a=Nn(n,["context","channel","sagaMonitor"]),r;function l(f){var s=f.getState,h=f.dispatch;return r=Xe.bind(null,J({},a,{context:c,channel:u,dispatch:h,getState:s,sagaMonitor:i})),function(p){return function(E){i&&i.actionDispatched&&i.actionDispatched(E);var d=p(E);return u.put(E),d}}}return l.run=function(){return r.apply(void 0,arguments)},l.setContext=function(f){G(c,f)},l}export{Qe as s};
