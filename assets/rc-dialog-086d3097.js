import{g as w,f as C,d as H}from"./@babel-54babf39.js";import{r as n,R as c}from"./react-4213cd65.js";import{P as le}from"./@rc-component-0eb82ab9.js";import{c as T}from"./classnames-96ac3354.js";import{f as se,p as ce,h as q,K as F}from"./rc-util-73e207f9.js";import{C as Z}from"./rc-motion-0956566f.js";function fe(e){var a=e.prefixCls,t=e.style,o=e.visible,r=e.maskProps,i=e.motionName;return n.createElement(Z,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(a,"-mask-hidden")},function(s,f){var m=s.className,d=s.style;return n.createElement("div",w({ref:f,style:C(C({},d),t),className:T("".concat(a,"-mask"),m)},r))})}function G(e,a,t){var o=a;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function J(e,a){var t=e["page".concat(a?"Y":"X","Offset")],o="scroll".concat(a?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[o],typeof t!="number"&&(t=r.body[o])}return t}function ue(e){var a=e.getBoundingClientRect(),t={left:a.left,top:a.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow;return t.left+=J(r),t.top+=J(r,!0),t}const me=n.memo(function(e){var a=e.children;return a},function(e,a){var t=a.shouldUpdate;return!t});var Q={width:0,height:0,overflow:"hidden",outline:"none"},de=c.forwardRef(function(e,a){var t=e.prefixCls,o=e.className,r=e.style,i=e.title,s=e.ariaId,f=e.footer,m=e.closable,d=e.closeIcon,y=e.onClose,b=e.children,N=e.bodyStyle,g=e.bodyProps,h=e.modalRender,x=e.onMouseDown,I=e.onMouseUp,P=e.holderRef,D=e.visible,k=e.forceRender,u=e.width,_=e.height,R=n.useRef(),E=n.useRef();c.useImperativeHandle(a,function(){return{focus:function(){var v;(v=R.current)===null||v===void 0||v.focus()},changeActive:function(v){var K=document,O=K.activeElement;v&&O===E.current?R.current.focus():!v&&O===R.current&&E.current.focus()}}});var M={};u!==void 0&&(M.width=u),_!==void 0&&(M.height=_);var $;f&&($=c.createElement("div",{className:"".concat(t,"-footer")},f));var V;i&&(V=c.createElement("div",{className:"".concat(t,"-header")},c.createElement("div",{className:"".concat(t,"-title"),id:s},i)));var U;m&&(U=c.createElement("button",{type:"button",onClick:y,"aria-label":"Close",className:"".concat(t,"-close")},d||c.createElement("span",{className:"".concat(t,"-close-x")})));var S=c.createElement("div",{className:"".concat(t,"-content")},U,V,c.createElement("div",w({className:"".concat(t,"-body"),style:N},g),b),$);return c.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?s:null,"aria-modal":"true",ref:P,style:C(C({},r),M),className:T(t,o),onMouseDown:x,onMouseUp:I},c.createElement("div",{tabIndex:0,ref:R,style:Q,"aria-hidden":"true"}),c.createElement(me,{shouldUpdate:D||k},h?h(S):S),c.createElement("div",{tabIndex:0,ref:E,style:Q,"aria-hidden":"true"}))}),p=n.forwardRef(function(e,a){var t=e.prefixCls,o=e.title,r=e.style,i=e.className,s=e.visible,f=e.forceRender,m=e.destroyOnClose,d=e.motionName,y=e.ariaId,b=e.onVisibleChanged,N=e.mousePosition,g=n.useRef(),h=n.useState(),x=H(h,2),I=x[0],P=x[1],D={};I&&(D.transformOrigin=I);function k(){var u=ue(g.current);P(N?"".concat(N.x-u.left,"px ").concat(N.y-u.top,"px"):"")}return n.createElement(Z,{visible:s,onVisibleChanged:b,onAppearPrepare:k,onEnterPrepare:k,forceRender:f,motionName:d,removeOnLeave:m,ref:g},function(u,_){var R=u.className,E=u.style;return n.createElement(de,w({},e,{ref:a,title:o,ariaId:y,prefixCls:t,holderRef:_,style:C(C(C({},E),r),D),className:T(i,R)}))})});p.displayName="Content";function ve(e){var a=e.prefixCls,t=a===void 0?"rc-dialog":a,o=e.zIndex,r=e.visible,i=r===void 0?!1:r,s=e.keyboard,f=s===void 0?!0:s,m=e.focusTriggerAfterClose,d=m===void 0?!0:m,y=e.wrapStyle,b=e.wrapClassName,N=e.wrapProps,g=e.onClose,h=e.afterClose,x=e.transitionName,I=e.animation,P=e.closable,D=P===void 0?!0:P,k=e.mask,u=k===void 0?!0:k,_=e.maskTransitionName,R=e.maskAnimation,E=e.maskClosable,M=E===void 0?!0:E,$=e.maskStyle,V=e.maskProps,U=e.rootClassName,S=n.useRef(),A=n.useRef(),v=n.useRef(),K=n.useState(i),O=H(K,2),z=O[0],X=O[1],ee=se();function te(){q(A.current,document.activeElement)||(S.current=document.activeElement)}function ae(){if(!q(A.current,document.activeElement)){var l;(l=v.current)===null||l===void 0||l.focus()}}function ne(l){if(l)ae();else{if(X(!1),u&&S.current&&d){try{S.current.focus({preventScroll:!0})}catch{}S.current=null}z&&(h==null||h())}}function L(l){g==null||g(l)}var W=n.useRef(!1),B=n.useRef(),oe=function(){clearTimeout(B.current),W.current=!0},re=function(){B.current=setTimeout(function(){W.current=!1})},Y=null;M&&(Y=function(j){W.current?W.current=!1:A.current===j.target&&L(j)});function ie(l){if(f&&l.keyCode===F.ESC){l.stopPropagation(),L(l);return}i&&l.keyCode===F.TAB&&v.current.changeActive(!l.shiftKey)}return n.useEffect(function(){i&&(X(!0),te())},[i]),n.useEffect(function(){return function(){clearTimeout(B.current)}},[]),n.createElement("div",w({className:T("".concat(t,"-root"),U)},ce(e,{data:!0})),n.createElement(fe,{prefixCls:t,visible:u&&i,motionName:G(t,_,R),style:C({zIndex:o},$),maskProps:V}),n.createElement("div",w({tabIndex:-1,onKeyDown:ie,className:T("".concat(t,"-wrap"),b),ref:A,onClick:Y,style:C(C({zIndex:o},y),{},{display:z?null:"none"})},N),n.createElement(p,w({},e,{onMouseDown:oe,onMouseUp:re,ref:v,closable:D,ariaId:ee,prefixCls:t,visible:i&&z,onClose:L,onVisibleChanged:ne,motionName:G(t,x,I)}))))}var Ce=function(a){var t=a.visible,o=a.getContainer,r=a.forceRender,i=a.destroyOnClose,s=i===void 0?!1:i,f=a.afterClose,m=n.useState(t),d=H(m,2),y=d[0],b=d[1];return n.useEffect(function(){t&&b(!0)},[t]),!r&&s&&!y?null:n.createElement(le,{open:t||r||y,autoDestroy:!1,getContainer:o,autoLock:t||y},n.createElement(ve,w({},a,{destroyOnClose:s,afterClose:function(){f==null||f(),b(!1)}})))};Ce.displayName="Dialog";export{Ce as D};
